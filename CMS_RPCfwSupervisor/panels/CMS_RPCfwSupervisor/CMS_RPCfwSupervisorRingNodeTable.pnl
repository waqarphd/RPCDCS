V 11
1
LANG:1 12 trendButton5
PANEL,-1 -1 742 540 N "_3DFace" 2
"$2"
"$sHvOrLv"
"main()
{
 
}" 0
 E E E E 1 0 0 0  -1 -3
""0  1
E " #uses \"CMS_RPCfwSupervisor/CMS_RPCfwSupervisor.ctl\"

string DETECTOR;
dyn_string dpes;
dyn_dyn_string channelsName;
string COMPONENT;
dyn_dyn_string channelDpeToConnect, channelMatrix;
dyn_string allChannels, allChannelDps;
int CHAMBER_INDEX=1,
		ONOFF_INDEX=1,
		LABEL_INDEX=1,
		OUTPUT_INDEX=2,
		STATUS_INDEX=4;
string systemName;
dyn_string secring;

getDpeToConnect()
{
channelDpeToConnect[1]=makeDynString(\"isOn\",\".actual.isOn\");
channelDpeToConnect[2]=makeDynString(\"vMon\",\".actual.vMon\");
channelDpeToConnect[3]=makeDynString(\"v0\",\".readBackSettings.v0\");
channelDpeToConnect[4]=makeDynString(\"iMon\",\".actual.iMon\");
channelDpeToConnect[5]=makeDynString(\"i0\",\".readBackSettings.i0\");
channelDpeToConnect[6]=makeDynString(\"status\",\".actual.status\");
}


createChannelMatrix( string HvOrLv, int &lineNum)
{
dyn_string sys,allChildren, split, chambers;
dyn_int intType;
string type,children,applicationName,ring=$2;

// dpGet(getSystemName()+\"DeviceComponentEndcap.applicationName\",applicationName);
fwInstallation_getApplicationSystem(\"CMS_RPCfwDevicesEndcap\",sys);
if(dynlen(sys)!=0)
	systemName=sys[1];

fwCU_getChildren(ring,chambers);
chambers=fwCU_getChildren(intType, ring);
//DebugN(sys,\"hey\");
lineNum=0;
if(dynlen(chambers)!=0)
for(int i=1; i<=dynlen(chambers); i++)
	{
	fwCU_getType(chambers[i],type);
	//DebugN(type);
	//if(type==\"ChamberNodeEndcap\")
	if(type==\"RPC_Chamber\")
	{
	children=\"\"; //initialize empty string
	dynAppend(channelMatrix[i],chambers[i]);
	allChildren=fwCU_getChildren(intType,chambers[i]);//each chamber will have a HV and a LV children
	
	//check if HV or LV has been selected
	if(dynlen(allChildren)!=0)
		{
		for (int j=1; j<=dynlen(allChildren);j++)
			{
			fwCU_getType(allChildren[j],type);
			//DebugN(\"sono qui1\",allChildren[j],type,HvOrLv);
			if((HvOrLv==\"HV\"&&type==\"HVChannelNodeEndcap\")||(HvOrLv==\"LV\"&&type==\"LVChannelNodeEndcap\"))
				{		
				children=allChildren[j];
				
				break;
				}
			}
		//get channels of type HvOrLv in chamber=chambers[i]
		if(children!=\"\")
			{
			dyn_string channelLogName=fwCU_getChildren(intType,children);
			//DebugN(channelLogName);
			if(dynlen(channelLogName)!=0)
				{
				for(int j=1;j<=dynlen(channelLogName);j++)
					{
					if(strpos(channelLogName[j],\"::\")>-1) 
						{
						split=strsplit(channelLogName[j],\"::\");
						dynAppend(channelMatrix[i],systemName+fwDU_getPhysicalName(systemName+split[3]));
						dynAppend(allChannels,systemName+split[3]);
						dynAppend(allChannelDps,systemName+fwDU_getPhysicalName(systemName+split[3]));
						}
					else
						{
						dynAppend(channelMatrix[i],systemName+fwDU_getPhysicalName(systemName+channelLogName[j]));
						//DebugN(systemName+fwDU_getPhysicalName(systemName+channelLogName[j]));
						dynAppend(allChannels,systemName+channelLogName[j]);
						dynAppend(allChannelDps,systemName+fwDU_getPhysicalName(systemName+channelLogName[j]));
						}
					}
				lineNum=lineNum+dynlen(channelLogName);
				}
			else
				lineNum++;
			}
		else
			lineNum++;
		}
	else
		lineNum++;	
	}
	
}	
}
" 0
 2
"CBRef" "1"
"EClose" E
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
1
LANG:1 6 Layer1
13 3
"trendButton1"
""
1 610 436 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
4 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  608 434 682 468

T 
1
LANG:1 12 trendButton1
"main()
{
if($sHvOrLv==\"Hv\")
  {
  
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"HV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"HV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
  //   DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
   }
else if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
  
}

else if($sHvOrLv==\"Lbb\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LBB\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
    // DebugN(\"--1--- all channels length0---\",dynlen(allChannels), allChannels);
  
}
else
  DebugN(\"none\");

   secring =\"f\";
  if ($sHvOrLv==\"Hv\")//taimoor
   {
   ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
 }
  else if($sHvOrLv==\"Lv\")//taimoor
  {
     ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
    }
   else if($sHvOrLv==\"Lbb\")//taimoor
  {
     ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
    }
}" 0
 E E "main()
{
    this.enabled= true;
    secring =\"f\";
    dyn_string a;
    a=strsplit ($2,\"_\");
    //DebugN(\"a \",a);
       
    if($sHvOrLv==\"Hv\" && a[2]!=\"EP1\" && a[2]!=\"EN1\")
      	  {
            //this.text=\"HV vMon C01-C18\";
            this.text=\"vMon\";
            FRAME1.text=\"HV C01-C18\";
            FRAME3.visible=FALSE;
          }
    else if($sHvOrLv==\"Hv\" && a[2]==\"EP1\")
      	  {
            //this.text=\"HV vMon C01-C36\";
            this.text=\"vMon\";
            FRAME1.text=\"HV C01-C36\";
            FRAME3.visible=FALSE;
          }
    else if($sHvOrLv==\"Hv\" && a[2]==\"EN1\")
      	  {
            //this.text=\"HV vMon C01-C36\";
            this.text=\"vMon\";
            FRAME1.text=\"HV C01-C36\";
            FRAME3.visible=FALSE;
           }
    
   
    else if($sHvOrLv==\"Lv\" && (a[2]==\"EP1\"||a[2]==\"EN1\"))
      	  {
            //this.text=\"LV iMon C01-C18\";
            this.text=\"C01-C18\";
            FRAME1.text=\"LV iMon\";  
            FRAME3.visible=FALSE;
            //FRAME2.visible=FALSE;
            FRAME4.visible=FALSE;
          }
    
    else if($sHvOrLv==\"Lv\" && (a[2]==\"EP2\"||a[2]==\"EN2\"||a[2]==\"EP3\" || a[2]==\"EN3\"))
      	  {
            //this.text=\"LV iMon C01-C18\";
            this.text=\"C01-C09\";
            FRAME3.text=\"LV iMon\";  
            FRAME1.visible=FALSE;
            //FRAME2.visible=FALSE;
            FRAME2.visible=FALSE;
          }
    
    
    else if($sHvOrLv==\"Lbb\" && (a[2]==\"EP1\"||a[2]==\"EN1\"))
      	  {
            //this.text=\"LBB iMon C03-C29\";    
            this.text=\"iMon\";
            FRAME1.text=\"LBB C03-C29\";
            FRAME3.visible=FALSE; 
          }
    else if($sHvOrLv==\"Lbb\" && (a[2]==\"EP2\"||a[2]==\"EN2\"))
      	  {
            //this.text=\"LBB iMon C02-C28\";    
            this.text=\"iMon\";
            FRAME1.text=\"LBB C02-C28\";
            FRAME3.visible=FALSE;
          }
    else if($sHvOrLv==\"Lbb\" && (a[2]==\"EP3\"||a[2]==\"EN3\"))
      	  {
            //this.text=\"LBB iMon C03-C29\";
             this.text=\"iMon\";
            FRAME1.text=\"LBB C03-C29\";
            FRAME3.visible=FALSE;
            
          }
    

//     else if($sHvOrLv==\"Lbb\" && a[2]==\"EN1\")
// 	  this.text=\"LBB iMon C03-C29\";    
//     else if($sHvOrLv==\"Lbb\" && a[2]==\"EN2\")
// 	  this.text=\"LBB iMon C02-C28\";    
//     else if($sHvOrLv==\"Lbb\" && a[2]==\"EN3\")
// 	  this.text=\"LBB iMon C03-C29\";
    
    
    
    
    else 
      this.visible=false;
}" 0

13 5
"trendButton2"
""
1 520 436 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
6 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  518 434 592 468

T 
1
LANG:1 12 trendButton2
"main()
{ 
  
 if($sHvOrLv==\"Hv\")
  {  
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"HV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"HV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
  //   DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
     secring =\"f\";  
   }
else if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t\";
}

else if($sHvOrLv==\"Lbb\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   //DebugN(\"$2  =\",$2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LBB\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
    // DebugN(\"LBB ------ all channels length0---\",dynlen(allChannels), allChannels);
//     secring =\"t\";
//     
//     ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
//         makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
}
else
  DebugN(\"none\");

if($sHvOrLv==\"Lbb\")//taimoor
  {secring =\"f\";
     ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
    }    
  
  
     

if ($sHvOrLv != \"Lbb\")
{
        ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
}
}" 0
 E E "main()
{
 
  this.enabled= true;
  secring =\"f\";
  dyn_string a;
    a=strsplit ($2,\"_\");
   
    if($sHvOrLv==\"Hv\" && a[2]!=\"EP1\" && a[2]!=\"EN1\")
      	  {
            //this.text=\"HV iMon C01-C18\";
            this.text=\"iMon\";  
            //FRAME1.text=\"HV C01-C18\"
           }
    else if($sHvOrLv==\"Hv\" && a[2]==\"EP1\")
      	  {
            //this.text=\"HV iMon C01-C36\";
            this.text=\"iMon\";
            //FRAME1.text=\"HV C01-C36\"
           }
    else if($sHvOrLv==\"Hv\" && a[2]==\"EN1\")
      	  {
            //this.text=\"HV iMon C01-C36\";
            this.text=\"iMon\";
            
          }

    
    
    else if($sHvOrLv==\"Lv\" && a[2]!=\"EP1\"  && a[2]!=\"EN1\")
      	  {
            //this.text=\"LV iMon C10-C18\";    
            this.text=\"C10-C18\"; 
          }
    else if($sHvOrLv==\"Lv\" && a[2]==\"EP1\")
      	  {
            //this.text=\"LV iMon C19-C36\";
            this.text=\"C19-C36\"; 
          }
    else if($sHvOrLv==\"Lv\" && a[2]==\"EN1\")
      	  {
            //this.text=\"LV iMon C19-C36\";
            this.text=\"C19-C36\"; 
          }
    
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EP1\")
      	  {
            //this.text=\"LBB iMon C30-C02\";    
            this.text=\"vMon\";     
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EP2\")
      	  {
            //this.text=\"LBB iMon C29-C01\";    
            this.text=\"vMon\";
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EP3\")
      	  {
            //this.text=\"LBB iMon C30-C02\";
            this.text=\"vMon\";
          }
    
    
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EN1\")
      	  {
            //this.text=\"LBB iMon C30-C02\";    
            this.text=\"vMon\";
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EN2\")
      	  {
            //this.text=\"LBB iMon C29-C01\";    
            this.text=\"vMon\";
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EN3\")
      	  {
            //this.text=\"LBB iMon C30-C02\";
            this.text=\"vMon\";
          }
    
    
    else 
      this.visible=false;
   
}" 0

25 6
"Table1"
""
1 30 20 E E E 1 E 1 E N "_WindowText" E N "_Window" E "main()
{
	/*dyn_string channels, channelName;
	dyn_float vMonTemp;
	getChannels($2, channels);
	this.deleteAllLines;
	for(int i=1; i <=dynlen(channels); i++)
	{
		dpGet(channels[i] + \".actual.vMon\", vMonTemp);
		channelName = strsplit(channels[i], \"/\");
		this.appendLine(\"channelDp\", channels[i], \"Channel\", channelName[3]+\":\"+channelName[4], \"vMon\", vMonTemp);
	}
	this.selectByClick;
	*/
}


getChannels(string wheel, dyn_string & channels)
{
	dyn_string childrenWheel, childrenSector, childrenChamber, exceptionInfo,childrenChannel, children;
	dynClear(children);
	fwTree_getChildren(wheel, childrenWheel, exceptionInfo);
	if(dynlen(childrenWheel) > 0)
	{
	//	DebugN(childrenWheel);
		for(int i=1; i<=dynlen(childrenWheel); i++)
		{
			fwTree_getChildren(childrenWheel[i], childrenSector, exceptionInfo);
			if(dynlen(childrenSector) > 0)
			{
			//	DebugN(childrenSector);
				for(int i=1; i<=dynlen(childrenSector); i++)
				{
					fwTree_getChildren(childrenSector[i], childrenChamber, exceptionInfo);
					if(dynlen(childrenChamber) > 0)
					{
					//	DebugN(childrenChamber);
						dynAppend(children, childrenChamber);
					}
				}
			}
		}
	}
	channels = children;
}
" 0

 E E
7 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 26 Arial,-1,13,5,40,0,0,0,0,0
0  28 18 692 402
"/*This script is used to visualize main infos about all sector chambers;this reads all children
 and gives an overview of the main parameters and of the status of the System.
 
 Date Creation:14/07/2004
 
 @author Giovanni Polese (INFN Naples) and Hassan Shahzad (NCP pakistan) */
#uses \"CMS_RPCfwSupervisor/CMS_RPCfwSupervisor.ctl\"
string DETECTOR,COMPONENT;
//string HARDWARE_COMPONENT;
string sernum,channelname;
//string LV_COMPONENT;
//string T_COMPONENT;
main()
{
//this.registerPanel(1,\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingNodeTable.pnl\",makeDynString(\"$2:\"+$2,\"$sHvOrLv:Lv\"));
//this.registerPanel(2,\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingNodeTable.pnl\",makeDynString(\"$2:\"+$2,\"$sHvOrLv:Lbb\")); 
  
dyn_string children,splitAlias,exceptionInfo,exInfo;
dyn_mixed value;
string statusChannel,status,alias;
//	string hardType,rbChildren;
dyn_string rbChildren;   //hassan
string hardType;   //hassan
char model;
int nicha,nvcha,v;
bool isOn,lbb = false;
	string offset;
	//dyn_string InfoPanel = strsplit($2,\"|\");
//DebugN(\"----->\",$sHvOrLv);//Checked warning $sHvOrLv
if($sHvOrLv == \"Hv\")
  hardType = \"HV\";
else if($sHvOrLv == \"Lv\")
  hardType = \"LV\";
else if($sHvOrLv == \"Lbb\")
	{
	hardType = \"LV\";
	lbb=true;
	}
	
v=1;
//delay panel's start respect to the general ??
delay(0,200);
	
DETECTOR = RPCfwSupervisor_detector($2);  //detector should be endcap
string name = DETECTOR+hardType;          //hardType=HV
      //  name =\"EndcapLV\";  //hassan
//	DebugN(\"--->\",name, DETECTOR ,hardType);
if(COMPONENT == \"\")
COMPONENT = RPCfwSupervisor_getComponent(name);
	//LV_COMPONENT = RPCfwSupervisor_getComponent(DETECTOR +\"LV\");
	//HARDWARE_COMPONENT = RPCfwSupervisor_getComponent(\"BarrelHV\");
	//r=getCurrentTime();
//	DebugN(\"DETECTOR\",DETECTOR, \"hardtype\",hardType,\"component\", COMPONENT, \"name\", name );

dyn_string listOfElementToRefresh;
dyn_string exceptionInfo;
if(lbb)
hardType = \"LBB\";
          //    RPCfwSupervisor_getChannelsFromChildren(1,$2,hardType,COMPONENT, channelsName[HARD]);
 //      DebugN(\"...?\",$2,hardType,COMPONENT);
bRPCfwSupervisor_getChannelsFromName($2,hardType,COMPONENT,channelsName[HARD]);
      
if($sHvOrLv == \"Lv\") 
  {
  dynUnique(channelsName[HARD]);
//      DebugN(channelsName[HARD],\"mmmmmm\");
  }
channelsName[LOG] = RPCfwSupervisor_getLogical(channelsName[HARD]);

// DebugN(\"channelsName  logical----------\",channelsName);  //hassan
dyn_string statusArray = makeDynString(\".actual.vMon\",\".actual.iMon\",\".actual.isOn\",\".actual.status\",\".readBackSettings.v0\",\".readBackSettings.i0\");
	
	//@param:infopanel; variable that transmitt tab choice
	
//	      DebugN(\"-->>\",model,$sHvOrLv);
	
for (int j=1;j<=dynlen(channelsName[HARD]);j++)
{
	if (channelsName[HARD][j]!= \"\")
          {	
	  splitAlias = strsplit(channelsName[LOG][j], \"/\");
	  model=splitAlias[2][0];
               // DebugN(\"-->>\",model,splitAlias);
        	if (splitAlias[2][1]!=\"V\")
                  		{	model = \"B\";
 //               DebugN(\"-->>\",model,splitAlias);
                  }
          		if ((model == \"H\")&&($sHvOrLv==\"Hv\") )//HV
			{
			//channels[v]=channelsName[j];
			v=v +1;
			this.columnHeader(6,\"iMon (uA)\");
			nicha= 3;
			}
			else if ((model == \"L\")&&($sHvOrLv==\"Lv\"))
			{
			//channels[v]=channelsName[j];
			v=v +1;
			this.columnHeader(6,\"iMon (A)\");
			nicha= 3;				
			}
			else if ((model == \"B\")&&($sHvOrLv==\"Lbb\"))
			{
			//channels[v]=channelsName[j];
			v=v +1;
			this.columnHeader(6,\"iMon (A)\");
			nicha= 3;				
			}
			
		}			
	
	}
	
	//DebugN(channels);
	
	this.deleteAllLines;
	
	for(int i=1; i <=dynlen(channelsName[HARD]); i++)
	{
		
		bool flag;
		 	
		fwTree_getParent(channelsName[LOG][i],children[i],exInfo);
                
                int pp = strpos(channelsName[LOG][i],\"_C\");
		rbChildren=substr(channelsName[LOG][i],pp+1, 10);
//		DebugN(\"rb children  \",rbChildren);
			if(strpos(channelsName[LOG][i],\"LBB\")>-1)
                {
//hassan		  	rbChildren=strsplit(channelsName[LOG][i],\"_\");
//hassan			rbChildren[4]=rbChildren[5]+\" pos. \"+rbChildren[6];
                                int pp = strpos(channelsName[LOG][i],\"_R\");
                		rbChildren=substr(channelsName[LOG][i],pp+1, 19);
		
                          	//	DebugN(\"rb children lbb \",rbChildren);
                }
		
		if(strpos(channelsName[LOG][i],\"ANA\")>-1)
                        {
                                int pp = strpos(channelsName[LOG][i],\"_C\");  //hassan
//hassan				rbChildren[4]=rbChildren[4]+\" Ana\";
       		rbChildren=substr(channelsName[LOG][i],pp+1, 11);  //hassan 
                               //           DebugN(\"inside ANA\");
                        }
                
		if(strpos(channelsName[LOG][i],\"DIG\")>-1)	
                {
                  int pp = strpos(channelsName[LOG][i],\"_C\");  //hassan
		//		rbChildren[4]=rbChildren[4]+\" Dig\";
                                rbChildren=substr(channelsName[LOG][i],pp+1, 11);  //hassan 
          //                                DebugN(\"inside ANA\");
                              	}
				
		//DebugN(rbChildren[4]);		
		for(int j=1; j<=dynlen(statusArray); j++)
		{
		//DebugN(channels[i],\"ds\");
		dynAppend(dpes,channelsName[HARD][i]);
		dpGet(channelsName[HARD][i] + statusArray[j], value[j]);
		dpConnect(\"refresh\", TRUE, channelsName[HARD][i] + statusArray[j]);
		
		}
		//Format output for vMon iMon
		dyn_string values= value;
		int pos=strpos(values[1],\".\");
		if(pos>-1)
		values[1] = substr(values[1],0,(pos+nicha));
		
		pos=strpos(values[2],\".\");
		if(pos>-1)
		values[2] = substr(values[2],0,(pos+nicha));
		
		pos=strpos(values[5],\".\");
		if(pos>-1)
		values[5] = substr(values[5],0,(pos+nicha));
		pos=strpos(values[6],\".\");
		if(pos>-1)
		values[6] = substr(values[6],0,(pos+nicha));
		
		if(value[3] == TRUE)
			statusChannel = \"ON\";
		else
			statusChannel = \"OFF\";

		
		if(getBit(value[4],8)||getBit(value[4],9))
			{
			status=\"TRIPPED\";
			//this.cellBackColRC(i-1,\"status\") = \"FwStateAttention3\";
			}
		else if(getBit(value[4],3)||getBit(value[4],4)||getBit(value[4],5)||getBit(value[4],12))
			{
			status=\"Warning\";
			//this.cellBackColRC(i-1,\"status\") = \"FwStateAttention2\";
			}
		else if(getBit(value[4],1))
			{
			//this.cellBackColRC(i-1,\"status\") = \"FwStateAttention1\";
			status=\"Ramping Up\";
			}
		else if(getBit(value[4],2))
			{
			//this.cellBackColRC(i-1,\"status\") = \"FwStateAttention1\";
			status=\"Ramping Down\";
			}
		else if(value[4]==0||value[4]==1)
			{
			status=\"OK\";
			}
		else
			{
			status=\"ERROR\";
			//this.cellBackColRC(i-1,\"status\") = \"FwStateAttention3\";
			}
    ///////////////////////////////
    ///////////////////////////////////
				if(hardType == \"HV\")
                {
   //           DebugN(\"inside hardtype=HV in offset func...\");
                  this.columnVisibility(9,true);
                  offset = getOffset(channelsName[HARD][i]);
               //   DebugN(\"offset=\", offset);
                  pos=strpos(offset,\".\");
		if(pos>-1)
		offset = substr(offset,0,(pos+nicha));
                  }
                else
                  this.columnVisibility(9,false);
/////////////// /////////////////////////////
///////////////////////////////////////////////
		//DebugN(\"SS\",status,flag);
		
		this.appendLine(\"channelDp\", channelsName[HARD][i],\"onOff\",statusChannel, \"Chamber\",rbChildren, \"vMon\", values[1], \"offset\",offset,
										\"iMon\", values[2],\"status\",status,\"v0\",values[5],\"i0\",values[6],\"details\",\"  ...\");
										
		if(statusChannel==\"ON\" && status ==\"OK\")
			{
			this.cellBackColRC(i-1,\"onOff\") = \"FwStateOKPhysics\";
			this.cellBackColRC(i-1,\"status\") = \"FwStateOKPhysics\";
			}
		else if (statusChannel==\"OFF\" && status ==\"OK\")
			{
			this.cellBackColRC(i-1,\"onOff\") = \"FwStateOKNotPhysics\";
			this.cellBackColRC(i-1,\"status\") = \"FwStateOKPhysics\";
			}
		else if (status ==\"ERROR\")
			{
			this.cellBackColRC(i-1,\"onOff\") = \"FwStateOKNotPhysics\";
			this.cellBackColRC(i-1,\"status\") = \"FwStateAttention3\";
			}
		
		
	}
	this.tableMode(TABLE_SELECT_NOTHING);
	this.selectByClick(TABLE_SELECT_NOTHING);
	
}

////////////////////////////////////////////////
string getDp(string sys, string num){
  dyn_string channels = dpNames(sys+\"*\",\"RpcBoardOffset\");
  //DebugN(channels);
  bool find = false;
  string channel;
  int i = 1;
  string serial,empty;
  while(!find)
  {
    dpGet(channels[i]+\".serial\",serial);
    //DebugN(serial,\"<>\",num);
    if(serial == num)
    {
      find = true;
      channel = channels[i];
    }else
    { 
     if((serial == \"\")&&(empty == \"\"))
       empty = i;
       i++;
     }
    if(i>dynlen(channels))
      {
      find = true;
      DebugN(\"Serial not existed yet\");
      return \"\";
      }    
    }
  //DebugN(channel,num,\"dddd\");
  return channel;
  
  }

string getOffset(string channel){
  string parent,sys,serial;
  dyn_string exInfo,children;
  
  
  
  fwDevice_getParent(channel,parent,exInfo);
  
  sys = dpSubStr(channel,DPSUB_SYS);
  dpGet(parent + \".Information.SerNum\",serial);
  int pun = strpos(serial,\".\"); 
  if(pun>-1)
    serial = substr(serial,0,pun);
  //DebugN(serial);
  if(sernum!=serial)
  {
  channelname = getDp(sys,serial);
  sernum= serial;
  }
//  DebugN(channel);
  dyn_string channels;
  if(channelname!=\"\")
  {
  dpGet(channelname+\".offset\",children);
  fwDevice_getChildren(parent,fwDevice_HARDWARE,channels,exInfo);
  //DebugN(channels);
  
  int pos = dynContains(channels,channel);
  if((pos>0)&&(dynlen(children)>1))
  {
    return(children[pos]);
    
    }
  else
    return \"nd\";
  }else
  return \"nd\";
}




///////////////////////////////////////////////////////
/////////////////////////////////////////////////////////

refreshKill(string dpe,bool value)
{
if(value)
	ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorKill.pnl\",\" Warning Message \", 
			makeDynString(\"\"));

}

refresh(string dpe, mixed value)
{
	string cellValue,floatToString;
	string channelName = dpSubStr(dpe, DPSUB_SYS_DP);
	string confName = dpSubStr(dpe, DPSUB_SYS_DP_EL_CONF_DET_ATT);
	string channel = dpSubStr(dpe, DPSUB_SYS_DP);
	int x = dynContains(channelsName[HARD],channel),pos,len,nicha;
	dyn_string InfoPanel = strsplit($2,\"|\");
	if ($sHvOrLv==\"Hv\" )//HV
			nicha= 3;
	else if ($sHvOrLv==\"Lv\")
			nicha= 3;				
	else if ($sHvOrLv==\"Lbb\")
			nicha= 3;	
	
	//DebugN(\"WW\",channels,x);
	dyn_string statusArray = makeDynString(\".actual.vMon\",\".actual.iMon\",\".actual.isOn\",\".actual.status\",
																\".readBackSettings.v0\",\".readBackSettings.i0\");
		bool flag=FALSE;
	
	for(int j=1; j<=dynlen(statusArray); j++)
			{
		
			//DebugN(\"QQ\",confName,channelName+ statusArray[j] + \":_online.._value\");
			if(confName == (channelName + statusArray[j] + \":_online.._value\") )
				{
				cellValue=value;
				
				
				
				if(j==1)
				{
					pos=strpos(cellValue,\".\");
					
					if(pos>-1)
					floatToString = substr(cellValue,0,(pos+nicha));
					else
					floatToString = cellValue;
					flag = TRUE;
					this.cellValueRC(x-1,\"vMon\") = floatToString;
				}
				else if(j==2)
				{
					pos=strpos(cellValue,\".\");
					if(pos>-1)
					floatToString = substr(cellValue,0,(pos+nicha));
					else
					floatToString = cellValue;
					this.cellValueRC(x-1,\"iMon\") = floatToString;
					flag = TRUE;
					string color;
					dpGet(channelName + statusArray[j] + \":_alert_hdl.._act_state_color\",color);
					if((color==\"FwAlarmWarnUnack\")||(color==\"FwAlarmErrorUnack\"))
						this.cellBackColRC(x-1,\"iMon\") = color;
					else
						this.cellBackColRC(x-1,\"iMon\") = \"FwBackgroundInputText\";
					//DebugN(\"color\",color);
				}
				else if(j==5)
				{
					pos=strpos(cellValue,\".\");
					
					if(pos>-1)
					floatToString = substr(cellValue,0,(pos+nicha));
					else
					floatToString = cellValue;
					this.cellValueRC(x-1,\"v0\") =floatToString;
					flag = TRUE;
				}
				else if(j==6)
				{
					pos=strpos(cellValue,\".\");
					
					if(pos>-1)
					floatToString = substr(cellValue,0,(pos+nicha));
					else
					floatToString = cellValue;
					this.cellValueRC(x-1,\"i0\") = floatToString;
					flag = TRUE;
				}
				else if(j==3)
					{
					if(cellValue == FALSE)
						{
						this.cellValueRC(x-1,\"onOff\") = \"OFF\";
						this.cellBackColRC(x-1,\"onOff\") = \"FwStateOKNotPhysics\";
						}
					else
						{
						this.cellValueRC(x-1,\"onOff\") = \"ON\";
						this.cellBackColRC(x-1,\"onOff\") = \"FwStateOKPhysics\";
						}
					flag = TRUE;	
					}
					
				else if(j==4)
					{
					if(getBit(value,8)||getBit(value,9))
							{
							this.cellValueRC(x-1,\"status\")=\"TRIPPED\";
                                                        this.cellBackColRC(x-1,\"status\") = \"FwStateAttention3\";
							}
					else if(getBit(value,3)||getBit(value,4)||getBit(value,5)||getBit(value,12))
							{
							this.cellValueRC(x-1,\"status\")=\"Warning\";
							this.cellBackColRC(x-1,\"status\") = \"FwStateAttention2\";
                                                        }
					else if(getBit(value,1))
							{
							this.cellValueRC(x-1,\"status\")=\"Ramping Up\";
							this.cellBackColRC(x-1,\"status\") = \"FwStateAttention1\";
                                                        }
					else if(getBit(value,2))
							{
							this.cellValueRC(x-1,\"status\")=\"Ramping Down\";
							this.cellBackColRC(x-1,\"status\") = \"FwStateAttention1\";
                                                        }
					else if(value==0||value==1)
							{
							this.cellValueRC(x-1,\"status\")=\"OK\";
							this.cellBackColRC(x-1,\"status\") = \"FwStateOKPhysics\";
                                                        }
					else
                                        {
							this.cellValueRC(x-1,\"status\")=\"ERROR\";
                                                      	this.cellBackColRC(x-1,\"status\") = \"FwStateAttention3\";				
                                                        }
                                                        }

				}
								
			}	
}


aRPCfwSupervisor_getChannelsFromName(string name, string type,string sysName, dyn_string & channels)
{
// To get channels starting from logical name
  //  dyn_string channels ;
  int pos;
  
       pos = strpos(name,\"_E\");

//DebugN(\"this is type:\",type);
  
    if(pos>0)
  {
  string search = substr(name,pos+1);
  string alias;
  dyn_string exInfo,nodes, children;
  fwNode_getNodes(sysName, fwDevice_LOGICAL, nodes, exInfo);

     for(int i = 1; i <= dynlen(nodes); i++)
      {
        alias = dpGetAlias(nodes[i] + \".\");
	//DebugN(\"nodes[i],alias\",nodes[i], alias);
	nodes[i] = sysName + alias;

	//type = \"/\"+type;
 //    DebugN(\"search before\", search);        
      if(strpos(nodes[i],\"/\"+type)>-1)  
        {
                fwDevice_getChildren(nodes[i], fwDevice_LOGICAL, children, exInfo);		                        
  //              DebugN(nodes[i]+\"getting\"+ type+\" type--------\",children);
              }
      }
     
//     dyn_string searches = strsplit(search,\"_\");
//      
      if(search==\"EP2_R3\" ){       search=\"EP2_R2_R3\";}  //hassan
//       
       if(search==\"EP3_R3\" )   {    search=\"EP3_R2_R3\";}// hassan
             if(search==\"EN2_R3\" ){       search=\"EN2_R2_R3\";}  //hassan
//       
       if(search==\"EN3_R3\" )   {    search=\"EN3_R2_R3\";}// hassan
//      
//     DebugN(\"search after\", search);
//     DebugN(\"children--------\",children);
     for(int i = 1; i<=dynlen(children);i++)
     {
       for(int j = 1; j<=dynlen(searches);j++)
       
         if((strpos(children[i],searches[j])>0))
         {if(j==dynlen(searches))
//              if((strpos(children[i],search)>-1))
             dynAppend(channels,sysName + fwDU_getPhysicalName(children[i]));     
           
         else
           break;
       }
       //if((strpos(children[i],search)>1))  
            
     }
//  DebugN(\"channels\",channels);
  
}
}



bRPCfwSupervisor_getChannelsFromName(string name, string type,string sysName, dyn_string & channels)
{
// To get channels starting from logical name
  //  dyn_string channels ;
  int pos;
  
       pos = strpos(name,\"_E\");

// DebugN(\"this is type:\",type);
  
  if(pos>0)
  {
  string search = substr(name,pos+1);
  string alias;
  dyn_string exInfo,nodes, children;
  fwNode_getNodes(sysName, fwDevice_LOGICAL, nodes, exInfo);

     for(int i = 1; i <= dynlen(nodes); i++)
      {
        alias = dpGetAlias(nodes[i] + \".\");
	//DebugN(\"nodes[i],alias\",nodes[i], alias);
	nodes[i] = sysName + alias;
	//type = \"/\"+type;
//     DebugN(\"search before\", search);        
      if(strpos(nodes[i],\"/\"+type)>-1)  
        {
                fwDevice_getChildren(nodes[i], fwDevice_LOGICAL, children, exInfo);		                        
   //             DebugN(nodes[i]+\"getting\"+ type+\" type--------\",children);
        }
      }
           if(search==\"EP1_R3\" && type == \"LBB\"){       search=\"EP1_R2_R3\";}  //hassan
      if(search==\"EP2_R3\" ){       search=\"EP2_R2_R3\";}  //hassan
      if(search==\"EP3_R3\" )   {    search=\"EP3_R2_R3\";}// hassan
      
        if(search==\"EN1_R3\" && type == \"LBB\"){       search=\"EN1_R2_R3\";}  //hassan
      if(search==\"EN2_R3\" ){       search=\"EN2_R2_R3\";}  //hassan
      if(search==\"EN3_R3\" )   {    search=\"EN3_R2_R3\";}// hassan
  //   DebugN(\"search after\", search);
//     DebugN(\"children--------\",children);
     for(int i = 1; i<=dynlen(children);i++)
     {
if((strpos(children[i],search)>-1))  
             dynAppend(channels,sysName + fwDU_getPhysicalName(children[i]));     
     }
}
}
" 0
"main(int row, string column, string value)
{
dynUnique(dpes);
DebugN(\"dpes\",dpes,\"row\",row);

	if (column == \"details\")
	{
		ChildPanelOn(\"CMS_RPCfwSupervisor//CMS_RPCfwSupervisorDetailPanelendcap.pnl\",
							\"Details\",
							makeDynString(\"$channel:\" + dpes[row+1],\"$row:\" + row),-100,-100);
						  					
	}
	else 	if (column == \"iMon\") 
	{
		ChildPanelOnCentralModal(	\"CMS_RPCfw_HardwareEndcap//CMS_RPCfw_HardwareEndcapAlarmOperationPopupPanel.pnl\",
									\"Alarm Options\", 
									makeDynString(\"$sDpe:\" +dpes[row+1] + \".actual.iMon\"));
	}

}" 0
 1 0 1 10 1 "Chamber" 8 1 0 "s" 1
LANG:1 7 Chamber
E
1
LANG:1 0 

100 "channelDp" 24 0 0 "s" 1
LANG:1 9 channelDp
E
1
LANG:1 0 

274 "onOff" 5 1 0 "s" 1
LANG:1 6 On/Off
E
1
LANG:1 0 

70 "v0" 5 1 0 "s" 1
LANG:1 2 v0
E
1
LANG:1 0 

70 "i0" 5 1 0 "s" 1
LANG:1 2 i0
E
1
LANG:1 0 

70 "vMon" 5 1 0 "s" 1
LANG:1 4 vMon
E
1
LANG:1 0 

70 "iMon" 5 1 0 "s" 1
LANG:1 4 iMon
E
1
LANG:1 0 

70 "status" 8 1 0 "s" 1
LANG:1 6 Status
E
1
LANG:1 0 

100 "details" 3 1 0 "s" 1
LANG:1 7 Details
E
1
LANG:1 0 

50 "offset" 2 1 0 "s" 1
LANG:1 6 offset
E
1
LANG:1 0 

40 
26 26 "" 1 1
LANG:1 2 #1
8 30
1
LANG:1 26 Arial,-1,13,5,40,0,0,0,0,0
0 0 1 1 1 7
1 0
13 7
"trendButton3"
""
1 400 436 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
8 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  398 434 472 468

T 
1
LANG:1 12 trendButton3
"main()
{

 if($sHvOrLv==\"Hv\")
  {  
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"HV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"HV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
     secring =\"t\";  
   }
else if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
   //  DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t3\";
}
else if($sHvOrLv==\"Lbb\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LBB\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
    // DebugN(\"--1--- all channels length0---\",dynlen(allChannels), allChannels);
  
}

else DebugN(\"none\");

if($sHvOrLv==\"Lbb\")//taimoor
  {secring =\"t\";
     ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisor_LBB_Trend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
    }  
else if($sHvOrLv==\"Lv\")//taimoor
  {secring =\"f\";
     ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
    }  
else
{
  ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2, 
	makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
}
}" 0
 E E "main()
{
   secring =\"f\";
       
 
  dyn_string a;
    a=strsplit ($2,\"_\");
    //if((a[2]==\"EP1\" || \"EN1\")&&($sHvOrLv!=\"Lv\")) FRAME2.visible=FALSE;
    if(a[2]==\"EP1\" || a[2]==\"EN1\") FRAME4.visible=FALSE;
   
    if($sHvOrLv==\"Hv\" && (a[2]==\"EP1\" || a[2]==\"EN1\"))
      	  {
            //this.text=\"HV vMon C19-C36\";
            this.visible=FALSE;
            //FRAME2.text=\"HV C19-C36\";
            FRAME2.visible=FALSE;
            FRAME4.visible=FALSE;
          }
   
      else if($sHvOrLv==\"Hv\" && (a[2]==\"EP2\" || a[2]==\"EN2\"||a[2]==\"EP3\" || a[2]==\"EN3\"))
      	  {
            //this.text=\"LV iMon C19-C27\";
           // this.visible=FALSE;
            this.text=\"vMon\";
            FRAME2.text=\"HV C19-C36\";
            FRAME4.visible=FALSE;
          }   
    else if($sHvOrLv==\"Lv\" && (a[2]==\"EP1\" || a[2]==\"EN1\"))
      	  {
            //this.text=\"LV iMon C19-C27\";
           // this.visible=FALSE;
            this.text=\"C01-C18\";
            FRAME2.text=\"LV vMon\";
          }
    
     else if($sHvOrLv==\"Lv\" && (a[2]==\"EP2\" || a[2]==\"EN2\"||a[2]==\"EP3\" || a[2]==\"EN3\"))
       	  {
             //this.text=\"LV vMon C01-C18\"; 
             this.text=\"C01-C09\";   
             FRAME4.text=\"LV vMon\";
             FRAME1.visible=FALSE; 
             FRAME2.visible=FALSE;
           }
//     else if($sHvOrLv==\"Lv\" && a[2]==\"EN1\")
//      	  {  
            //this.text=\"LV vMon C01-C18\";  
//            this.text=\"C01-C18\";   
//            FRAME2.text=\"LV vMon\";
//           }
    else if($sHvOrLv==\"Lbb\" && (a[2]==\"EP1\"||a[2]==\"EN1\"))
      	  {
           // this.text=\"LBB vMon C03-C29\";    
            this.text=\"iMon\";
            FRAME2.visible=TRUE;
            FRAME2.text=\"LBB C30-C02\";
            FRAME4.visible=FALSE;
            this.visible=TRUE;
           }
    else if($sHvOrLv==\"Lbb\" && (a[2]==\"EP2\"||a[2]==\"EN2\"))
      	  {
            //this.text=\"LBB vMon C02-C28\";    
      
            this.text=\"iMon\";
            FRAME2.text=\"LBB C29-C01\";
            FRAME3.visible=FALSE;
            FRAME4.visible=FALSE;
          }
    else if($sHvOrLv==\"Lbb\" && (a[2]==\"EP3\"||a[2]==\"EN3\"))
      	 {
           // this.text=\"LBB vMon C03-C29\"; 
    
           this.text=\"iMon\";
           FRAME2.text=\"LBB C30-C02\";
           FRAME3.visible=FALSE;
           FRAME4.visible=FALSE;
         }
    
//     else if($sHvOrLv==\"Lbb\" && a[2]==\"EN1\")
//       	  {
            //this.text=\"LBB vMon C03-C29\";    
//             
//                     
//            FRAME2.visible=FALSE;
//            this.visible=FALSE;
//           }
//     else if($sHvOrLv==\"Lbb\" && a[2]==\"EN2\")
//       	  {
            //this.text=\"LBB vMon C02-C28\";    
//                        
//             this.text=\"iMon\";
//             FRAME2.text=\"LBB C29-C01\";
//             FRAME3.visible=FALSE; 
//           }
//     else if($sHvOrLv==\"Lbb\" && a[2]==\"EN3\")
//       	  {
           // this.text=\"LBB vMon C03-C29\";
//             
//             this.text=\"iMon\";
//             FRAME2.text=\"LBB C30-C02\";
//             FRAME3.visible=FALSE; 
//           }
    
    
    else 
      this.visible=false;
   

}" 0

13 8
"trendButton4"
""
1 310 436 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
9 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  308 434 382 468

T 
1
LANG:1 12 trendButton4
"main()
{ 
  
    if($sHvOrLv==\"Hv\")
  {  
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"HV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"HV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
     secring =\"t\";  
   }
else if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t4\";

}
else if($sHvOrLv==\"Lbb\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   //DebugN(\"$2  =\",$2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LBB\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
    // DebugN(\"LBB ------ all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t\";
    
    ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisor_LBB_Trend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
}
else DebugN(\"none\");
  
 if($sHvOrLv==\"Lv\")
{
 secring =\"t\";
       ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
        
}
    

else if ($sHvOrLv != \"Lbb\")
{
        ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
      
       }
}" 0
 E E "main()
{
  secring =\"f\";
   
dyn_string a;
    a=strsplit ($2,\"_\");
   
    if($sHvOrLv==\"Hv\" && (a[2]==\"EP1\" || a[2]==\"EN1\"))
      	  {
            //this.text=\"HV iMon C19-C36\";
            this.visible=FALSE;
          }
     else if($sHvOrLv==\"Hv\" && (a[2]==\"EP2\" || a[2]==\"EN2\"||a[2]==\"EP3\" || a[2]==\"EN3\"))
      	  {
            //this.text=\"HV iMon C19-C36\";
            this.text=\"iMon\";
          }
        
    else if($sHvOrLv==\"Lv\" && a[2]!=\"EP1\" && a[2]!=\"EN1\")
      	  {
            //this.text=\"LV iMon C28-C36\";   
            this.text=\"C10-C18\";   
          }
    
   else if($sHvOrLv==\"Lv\" && (a[2]==\"EP1\" || a[2]==\"EN1\"))
     	  {
           //this.text=\"LV vMon C19-C36\";    
           this.text=\"C19-C36\";
          }
//     else if($sHvOrLv==\"Lv\" && a[2]==\"EN1\")
//    	  {  
            //this.text=\"LV vMon C19-C36\";
//             this.visible=\"C19-C36\";
//           }
     else if($sHvOrLv==\"Lbb\" && a[2]==\"EP1\")
       	 {
            this.visible=TRUE; 
            this.text=\"vMon\"; 
         }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EP2\")
      	  {
            //this.text=\"LBB vMon C29-C01\";    
            this.text=\"vMon\"; 
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EP3\")
      	  {
            //this.text=\"LBB vMon C30-C02\";
             this.text=\"vMon\"; 
          }
    
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EN1\")
      	  {
            this.visible=TRUE; 
            this.text=\"vMon\";    
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EN2\")
      	  {
            //this.text=\"LBB vMon C29-C01\";    
            this.text=\"vMon\"; 
          }
    else if($sHvOrLv==\"Lbb\" && a[2]==\"EN3\")
      	  {
            //this.text=\"LBB vMon C30-C02\";
           this.text=\"vMon\"; 
            }
    
    
    else 
      this.visible=false;



  
}" 0

13 9
"PUSH_BUTTON1"
""
1 30 430 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
10 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 26 Arial,-1,11,5,75,1,0,0,0,0
0  28 428 142 472

T 
1
LANG:1 16 Ring Temperature
"main()
{
//ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorHVMaoStatus.pnl\",\"HV Mao Status\",makeDynString(\"$2:\"+$2));
ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingTempTrend.pnl\",\"HV Mao Status\",makeDynString(\"$2:\"+$2));
    
}" 0
 E E E
13 10
"trendButton5"
""
1 610 486 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
12 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  608 484 682 518

T 
1
LANG:1 12 trendButton5
"main()
{ 
  
 if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t4\";
    
}

else DebugN(\"none\");
  




        ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
      
}" 0
 E E "main()
{
  secring =\"f\";
   
dyn_string a;
    a=strsplit ($2,\"_\");
   
   if($sHvOrLv==\"Lv\" && a[2]!=\"EP1\" && a[2]!=\"EN1\")
	  //this.text=\"LV vMon C01-C09\";
     this.text=\"C19-C27\";
    
//     else if($sHvOrLv==\"Lv\" && a[2]==\"EP1\")
// 	  this.text=\"LV Voltage C01-C18\";
//     else if($sHvOrLv==\"Lv\" && a[2]==\"EN1\")
// 	  this.text=\"LV Voltage C01-C18\";   
      
    else 
      this.visible=false;



  
}" 0

13 11
"trendButton6"
""
1 520 486 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
14 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  518 484 592 518

T 
1
LANG:1 12 trendButton6
"main()
{ 
  
if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t4\";
}
else DebugN(\"none\");
  



        ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:iMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"I\"));
      
}" 0
 E E "main()
{
  secring =\"f\";
   
dyn_string a;
    a=strsplit ($2,\"_\");
   
   if($sHvOrLv==\"Lv\" && a[2]!=\"EP1\"  && a[2]!=\"EN1\")
	  this.text=\"C28-C36\";    
    
    
    
    else 
      this.visible=false;



  
}" 0

13 12
"trendButton7"
""
1 400 486 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
16 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  398 484 472 518

T 
1
LANG:1 12 trendButton7
"main()
{ 
if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
   //  DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t3\";
}
else DebugN(\"none\");
  
        ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
      
}" 0
 E E "main()
{
  secring =\"f\";
   
dyn_string a;
    a=strsplit ($2,\"_\");
   
    if($sHvOrLv==\"Lv\" && a[2]!=\"EP1\" && a[2]!=\"EN1\")
	  this.text=\"C19-C27\";
    
    
    else 
      this.visible=false;



  
}" 0

13 13
"trendButton8"
""
1 310 486 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
18 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0  308 484 382 518

T 
1
LANG:1 12 trendButton8
"main()
{ 
  if($sHvOrLv==\"Lv\")
{
   if(DETECTOR == \"\")	
	DETECTOR = RPCfwSupervisor_detector($2);
   if(COMPONENT == \"\")
        COMPONENT = RPCfwSupervisor_getComponent(DETECTOR+\"LV\");
     endcapRPCfwSupervisor_getChannelsFromName($2,\"LV\",COMPONENT,allChannels[HARD]);
  //    allChannels[LOG] = RPCfwSupervisor_getLogical(allChannels[HARD]);
 //    DebugN(\"all channels length0---\",dynlen(allChannels), allChannels);
    secring =\"t4\";
    
}
else DebugN(\"none\");
  



        ChildPanelOnCentral(\"CMS_RPCfwSupervisor/CMS_RPCfwSupervisorRingHvTrend.pnl\",$sHvOrLv+\" RPC Endcap Trends. Ring \"+$2,  
        makeDynString(\"$sAllChannels:\"+allChannels,\"$sAllChannelDps:\"+allChannelDps,\"$secring:\"+secring,\"$sParameter:vMon\",\"$2:\"+$2,\"$sHvOrLv:\"+$sHvOrLv,\"$sIOrV:\"+\"V\"));
      
}" 0
 E E "main()
{
  secring =\"f\";
   
dyn_string a;
    a=strsplit ($2,\"_\");
   
    if($sHvOrLv==\"Lv\" && a[2]!=\"EP1\" && a[2]!=\"EN1\")
	  this.text=\"C28-C36\";
    
    
    else 
      this.visible=false;



  
}" 0

30 14
"FRAME1"
""
1 430 413 E E E 1 E 1 E N "_WindowText" E N {0,0,0} E E
 E E
19 0 0 0 0 0
E E E
1
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 0 1 0 1 E 0.666666666666667 0 0.850746268656716 223.333333333333 67.6417910447761 0 E 430 413 701 481
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0 1
LANG:1 11 Frame Title
30 15
"FRAME2"
""
1 430 413 E E E 1 E 1 E N "_WindowText" E N {0,0,0} E E
 E E
21 0 0 0 0 0
E E E
1
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 0 1 0 1 E 0.666666666666667 0 0.850746268656716 13.3333333333334 67.6417910447761 0 E 430 413 701 481
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0 1
LANG:1 11 Frame Title
30 16
"FRAME3"
""
1 290 413 E E E 1 E 1 E N "_WindowText" E N {0,0,0} E E
 E E
22 0 0 0 0 0
E E E
1
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 0 1 0 1 E 0.45 0 1.61194029850746 379.5 -247.731343283582 0 E 290 413 691 481
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0 1
LANG:1 11 Frame Title
30 17
"FRAME4"
""
1 290 413 E E E 1 E 1 E N "_WindowText" E N {0,0,0} E E
 E E
24 0 0 0 0 0
E E E
1
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 0 1 0 1 E 0.45 0 1.61194029850746 169.5 -245.731343283581 0 E 290 413 691 481
1
LANG:1 33 MS Shell Dlg,-1,11,5,50,0,0,0,0,0
0 1
LANG:1 11 Frame Title
0
LAYER, 1 
1
LANG:1 6 Layer2
0
LAYER, 2 
1
LANG:1 6 Layer3
0
LAYER, 3 
1
LANG:1 6 Layer4
0
LAYER, 4 
1
LANG:1 6 Layer5
0
LAYER, 5 
1
LANG:1 6 Layer6
0
LAYER, 6 
1
LANG:1 6 Layer7
0
LAYER, 7 
1
LANG:1 6 Layer8
0
0
