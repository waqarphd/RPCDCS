<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>fwPeriphAddress.ctl File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>fwPeriphAddress.ctl File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This library contains function associated with the address config. Functions are provided for getting the current settings, deleting the config and setting the config<p>
<dl compact><dt><b>Creation Date</b></dt><dd>28/03/2000</dd></dl>
<dl compact><dt><b>Modification History</b></dt><dd>15/01/04 Oliver Holme (IT-CO) Modified library to match functionality of other config libs</dd></dl>
<dl compact><dt><b>Constraints</b></dt><dd>WARNING: the functions use the dpGet or dpSetWait, problems may occur when using these functions in a working function called by a PVSS (dpConnect) or in a calling function</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Geraldine Thomas, Oliver Holme (IT-CO)</dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a83" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_changeOpcGroups"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_changeOpcGroups           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">dyn_string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>newGroupName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Changes the OPC group in the address config for the given list of dpes<p>
<dl compact><dt><b>Constraints</b></dt><dd>The relevant SIM Manager or Driver must be running to access the address configs</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpes</em>&nbsp;</td><td>The list of dpes to act on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newGroupName</em>&nbsp;</td><td>The new OPC server group name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>Details of any exceptions are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_checkAreDriversRunning"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_checkAreDriversRunning           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">dyn_int&nbsp;</td>
          <td class="mdname" nowrap> <em>driverNumbers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_bool &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>areRunning</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>systemName</em> = <code>"LOCAL"</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks to see if a given list of driver managers are running or not<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>driverNumbers</em>&nbsp;</td><td>the numbers of the drivers to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>areRunning</em>&nbsp;</td><td>A list of the driver states is returned here - TRUE if manager is running, else FALSE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>if the driver is not running, an exception is returned </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>systemName</em>&nbsp;</td><td>OPTIONAL PARAMETER: System name on which to check if the drivers are running (e.g. dist_1:). If not passed, the local system is checked. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_checkIsDriverRunning"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_checkIsDriverRunning           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>driverNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>isRunning</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>systemName</em> = <code>"LOCAL"</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks to see if a given driver manager is running or not<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>driverNumber</em>&nbsp;</td><td>the number of the driver to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isRunning</em>&nbsp;</td><td>Driver state is returned here - TRUE if manager is running, else FALSE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>if the driver is not running, an exception is returned </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>systemName</em>&nbsp;</td><td>OPTIONAL PARAMETER: System name on which to check if the driver is running (e.g. dist_1:). If not passed, the local system is checked. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_checkModbusParameters"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_checkModbusParameters           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">dyn_string&nbsp;</td>
          <td class="mdname" nowrap> <em>dsParameters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if data is Ok to set a MODBUS address<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dsParameters</em>&nbsp;</td><td>parameters used to set the _address config (see constants definition) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>for any error. If a parameter is incorrect, exceptionInfo is not empty ! </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_createPvssInternalDpsForDriver"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_createPvssInternalDpsForDriver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>driverNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates the necessary PVSS internal data for a given driver number. These are "_DriverX" and "_Stat_Configs_driver_X" where X is the driver number.<p>
<dl compact><dt><b>Constraints</b></dt><dd>The driver number must be between 1 and 254 (PVSS limitation on driver numbers)</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>driverNumber</em>&nbsp;</td><td>The driver number for which you wish to create the internal PVSS dps </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>Details of any exceptions are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_delete"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_delete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpe</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the address config of the given dp element<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpe</em>&nbsp;</td><td>data point element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>details of any errors are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_deleteMultiple"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_deleteMultiple           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">dyn_string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the address config of the given dp elements<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpes</em>&nbsp;</td><td>list of data point elements </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>details of any errors are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_get"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpe</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>configExists</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_anytype &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>isActive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets the address config of a datapoint element. The function checks that the relevant driver is running. If not it returns an exception saying the config could not be read.<p>
<dl compact><dt><b>Constraints</b></dt><dd>Currently only supports MODBUS, OPCCLIENT, DIP and DIMCLIENT address types</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpe</em>&nbsp;</td><td>datapoint element to read from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>configExists</em>&nbsp;</td><td>TRUE if address config exists, else FALSE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Address object is returned here: <br>
<br>
 configParameters[fwPeriphAddress_TYPE] contains type of addressing: <br>
  fwPeriphAddress_TYPE_OPCCLIENT <br>
  fwPeriphAddress_TYPE_DIMCLIENT <br>
  fwPeriphAddress_TYPE_DIP <br>
  fwPeriphAddress_TYPE_MODBUS <br>
  fwPeriphAddress_TYPE_S7 <br>
  or fwPeriphAddress_TYPE_CMW <br>
 configParameters[fwPeriphAddress_DRIVER_NUMBER] contains driver number <br>
 configParameters[fwPeriphAddress_ROOT_NAME] contains address string <br>
 configParameters[fwPeriphAddress_DIRECTION] contains direction of address for dpe: <br>
  DPATTR_ADDR_MODE_OUTPUT_SINGLE <br>
  DPATTR_ADDR_MODE_INPUT_SPONT <br>
  or 6 for in/out (no PVSS constant available yet) <br>
 configParameters[fwPeriphAddress_DATATYPE] contains the translation datatype <br>
 configParameters[fwPeriphAddress_ACTIVE] contains whether or not the address is active <br>
 Note: This active parameter is ignored if using DIM (always active) <br>
 <br>
 MODBUS Specific entries in address object: <br>
  configParameters[fwPeriphAddress_MODBUS_LOWLEVEL] <br>
  configParameters[fwPeriphAddress_MODBUS_SUBINDEX] <br>
  configParameters[fwPeriphAddress_MODBUS_START] <br>
  configParameters[fwPeriphAddress_MODBUS_INTERVAL] <br>
 <br>
 OPC Specific entries in address object: <br>
  configParameters[fwPeriphAddress_OPC_LOWLEVEL] contains is lowlevel comparison is enabled (output only) <br>
  configParameters[fwPeriphAddress_OPC_SUBINDEX] contains subindex if datatype = 'bitstring' <br>
  configParameters[fwPeriphAddress_OPC_SERVER_NAME] contains OPC server name <br>
  configParameters[fwPeriphAddress_OPC_GROUP_IN] contains OPC group for input address configs only <br>
  configParameters[fwPeriphAddress_OPC_GROUP_OUT] contains OPC group for output address configs only <br>
 <br>
 DIM Client Service Specific entries in address object: <br>
  configParameters[fwPeriphAddress_DIM_CONFIG_DP] the DIM config data point to which the config is saved <br>
  configParameters[fwPeriphAddress_DIM_DEFAULT_VALUE] default value setting <br>
  configParameters[fwPeriphAddress_DIM_TIMEOUT] timeout setting <br>
  configParameters[fwPeriphAddress_DIM_FLAG] flag setting <br>
  configParameters[fwPeriphAddress_DIM_IMMEDIATE_UPDATE] immediate update setting <br>
 <br>
 DIP Client Specific entries in address object: <br>
  configParameters[fwPeriphAddress_DIP_CONFIG_DP] the DIP config data point to which the config is saved <br>
 <br>
 S7 Specific entries in address object: <br>
  configParameters[fwPeriphAddress_S7_LOWLEVEL] <br>
  configParameters[fwPeriphAddress_S7_SUBINDEX] <br>
  configParameters[fwPeriphAddress_S7_START] <br>
  configParameters[fwPeriphAddress_S7_INTERVAL] <br>
  configParameters[fwPeriphAddress_S7_POLL_GROUP] <br>
 <br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isActive</em>&nbsp;</td><td>TRUE is address config is active, else FALSE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>details of any errors are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_getDataType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_getDataType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>dataType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpe</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>addressType</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks the type of a data point element and returns the integer used to represent this data type depending on the required type of peripheral address.<p>
NOTE: this function is mostly redundant now as OPC supports the default data transformation now. The results for address type DIM are also redundant now.<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Internal</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dataType</em>&nbsp;</td><td>The integer representing the data type is returned here (returns -1 if dpe type is unsupported) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dpe</em>&nbsp;</td><td>The data point element to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addressType</em>&nbsp;</td><td>The type of peripheral address (DIM or OPC) </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_getUnicosAddressReference"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_getUnicosAddressReference           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">dyn_string&nbsp;</td>
          <td class="mdname" nowrap> <em>dsParameters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addressReference</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get formatted address for Unicos using given parameters<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dsParameters</em>&nbsp;</td><td>parameters used to build the address reference (see constants definition) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addressReference</em>&nbsp;</td><td>address reference (empty string in case of error) </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_readSettings"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_readSettings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap> <em>referencePanel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>addressParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to read the address configuration parameters that can be entered in the panels fwPeriphAddressDIM.pnl and fwPeriphAddressOPC.pnl. It can be extended to support other address formats.<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Internal</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>referencePanel</em>&nbsp;</td><td>the name of the reference panel to read from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addressParam</em>&nbsp;</td><td>the address parameterization that was entered in the panel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>details of any exceptions are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_set"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_set           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpe</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_anytype&nbsp;</td>
          <td class="mdname" nowrap> <em>configParameters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>runDriverCheck</em> = <code>FALSE</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the address config for a given data point element<p>
<dl compact><dt><b>Constraints</b></dt><dd>Currently only supports MODBUS, OPCCLIENT, DIP and DIMCLIENT address types</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpe</em>&nbsp;</td><td>datapoint element to act on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>configParameters</em>&nbsp;</td><td>Address object is passed here: <br>
<br>
 configParameters[fwPeriphAddress_TYPE] contains type of addressing: <br>
  fwPeriphAddress_TYPE_OPCCLIENT <br>
  fwPeriphAddress_TYPE_DIMCLIENT <br>
  fwPeriphAddress_TYPE_DIP <br>
  fwPeriphAddress_TYPE_MODBUS <br>
  fwPeriphAddress_TYPE_S7 <br>
  or fwPeriphAddress_TYPE_CMW <br>
 configParameters[fwPeriphAddress_DRIVER_NUMBER] contains driver number <br>
 configParameters[fwPeriphAddress_ROOT_NAME] contains address string <br>
 configParameters[fwPeriphAddress_DIRECTION] contains direction of address for dpe: <br>
  DPATTR_ADDR_MODE_OUTPUT_SINGLE <br>
  DPATTR_ADDR_MODE_INPUT_SPONT <br>
  or 6 for in/out (no PVSS constant available yet) <br>
 configParameters[fwPeriphAddress_DATATYPE] contains the translation datatype <br>
 configParameters[fwPeriphAddress_ACTIVE] contains whether or not the address is active <br>
 Note: This active parameter is ignored if using DIM (always active) <br>
 <br>
 MODBUS Specific entries in address object: <br>
  configParameters[fwPeriphAddress_MODBUS_LOWLEVEL] <br>
  configParameters[fwPeriphAddress_MODBUS_SUBINDEX] <br>
  configParameters[fwPeriphAddress_MODBUS_START] <br>
  configParameters[fwPeriphAddress_MODBUS_INTERVAL] <br>
 <br>
 OPC Specific entries in address object: <br>
  configParameters[fwPeriphAddress_OPC_LOWLEVEL] contains is lowlevel comparison is enabled (output only) <br>
  configParameters[fwPeriphAddress_OPC_SUBINDEX] contains subindex if datatype = 'bitstring' <br>
  configParameters[fwPeriphAddress_OPC_SERVER_NAME] contains OPC server name <br>
  configParameters[fwPeriphAddress_OPC_GROUP_IN] contains OPC group for input address configs only <br>
  configParameters[fwPeriphAddress_OPC_GROUP_OUT] contains OPC group for output address configs only <br>
 <br>
 DIM Client Service Specific entries in address object: <br>
  configParameters[fwPeriphAddress_DIM_CONFIG_DP] the DIM config data point to which the config is saved <br>
  configParameters[fwPeriphAddress_DIM_DEFAULT_VALUE] default value setting <br>
  configParameters[fwPeriphAddress_DIM_TIMEOUT] timeout setting <br>
  configParameters[fwPeriphAddress_DIM_FLAG] flag setting <br>
  configParameters[fwPeriphAddress_DIM_IMMEDIATE_UPDATE] immediate update setting <br>
 <br>
 DIP Client Specific entries in address object: <br>
  configParameters[fwPeriphAddress_DIP_CONFIG_DP] the DIP config data point to which the config is saved <br>
 <br>
 S7 Specific entries in address object: <br>
  configParameters[fwPeriphAddress_S7_LOWLEVEL] <br>
  configParameters[fwPeriphAddress_S7_SUBINDEX] <br>
  configParameters[fwPeriphAddress_S7_START] <br>
  configParameters[fwPeriphAddress_S7_INTERVAL] <br>
  configParameters[fwPeriphAddress_S7_POLL_GROUP] <br>
 <br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>details of any errors are returned here </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>runDriverCheck</em>&nbsp;</td><td>Optional parameter (default value = FALSE) - TRUE to check if driver is running before setting config, else FALSE The necessary driver number must be running in order to successfully create config </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_setModbus"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_setModbus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpe</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string&nbsp;</td>
          <td class="mdname" nowrap> <em>dsParameters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
set MODBUS address<p>
<dl compact><dt><b>Constraints</b></dt><dd>. In this function, we suppose that variable dsParameters is well formatted. Before calling this function, it is recommended to check the parameters using the fwPeriphAddress_checkModbusParameters function. . In the parameters, the field addressReference could be obtain using fwPeriphAddress_getUnicosAddressReference</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpe</em>&nbsp;</td><td>datapoint element whose address have to be set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dsParameters</em>&nbsp;</td><td>parameters used to set the _address config (see constants definition) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>for any error... </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="fwPeriphAddress.ctl::fwPeriphAddress_setOPC"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fwPeriphAddress_setOPC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap> <em>dpe</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>opcServerName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>driverNum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>OPCItemName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap> <em>OPCGroup</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>subindex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dyn_string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>exceptionInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add an address config for an OPC Item<p>
<dl compact><dt><b>Constraints</b></dt><dd>None</dd></dl>
<dl compact><dt><b>Usage</b></dt><dd>Public</dd></dl>
<dl compact><dt><b>PVSS managers</b></dt><dd>VISION, CTRL</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dpe</em>&nbsp;</td><td>data point element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>opcServerName</em>&nbsp;</td><td>data point name of the OPC Server wihtout system name and "_" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>driverNum</em>&nbsp;</td><td>driver number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>OPCItemName</em>&nbsp;</td><td>opc item name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>OPCGroup</em>&nbsp;</td><td>opc group name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>datatype</em>&nbsp;</td><td>translation datatype for address (0 gives automatic translation) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>DPATTR_ADDR_MODE_INPUT_SPONT: spontaneous input DPATTR_ADDR_MODE_INPUT_SPONT+64: spontaneous input and old/new comparison DPATTR_ADDR_MODE_OUTPUT_SINGLE: output DPATTR_ADDR_MODE_OUTPUT_SINGLE+64: output and old/new comparison </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>subindex</em>&nbsp;</td><td>used where datatype is set to 'bitstring'. Subindex gives the position of the desired bit. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptionInfo</em>&nbsp;</td><td>details of any errors are returned here </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Dec 20 13:30:58 2007 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
